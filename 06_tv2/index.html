<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Research Methods: Open Science and Reproducible Research in Linguistics</title>
    <meta charset="utf-8" />
    <meta name="author" content="Joseph V. Casillas, PhD" />
    <script src="assets/header-attrs/header-attrs.js"></script>
    <link href="assets/remark-css/hygge.css" rel="stylesheet" />
    <link href="assets/remark-css/rutgers.css" rel="stylesheet" />
    <link href="assets/remark-css/rutgers-fonts.css" rel="stylesheet" />
    <script src="assets/kePrint/kePrint.js"></script>
    <link href="assets/lightable/lightable.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/5235085b15.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Research Methods: Open Science and Reproducible Research in Linguistics
]
.subtitle[
## Welcome to the tidyverse II: Tidying and descriptives
]
.author[
### Joseph V. Casillas, PhD
]
.date[
### Rutgers University</br>Spring 2019</br>Last update: 2025-02-16
]

---











background-color: black
background-image: url(https://raw.githubusercontent.com/jvcasillas/media/master/general/memes/sucking2.png)
background-size: contain

---
background-color: black
background-image: url(https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/tidyverse.png), url(https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/dplyr.png), url(https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/tidyr.png)
background-size: 500px, 250px, 250px
background-position: 50% 50%, 5% 50%, 95% 50%

---
class: title-slide-section-grey, middle, center
background-image: url(https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/dplyr.png)
background-size: contain

---
layout: true
class: middle

# **select** 

# .blue[&lt;u&gt;columns&lt;/u&gt;] .grey[of a dataframe] 

# .grey[with]

# .big[select()]

---

---
background-image: url(./assets/img/select1.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/select2.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/select3.png)
background-size: 350px
background-position: 80% 50%

---
layout: false

# select()

.big[

- You can select consecutive columns using "`:`" (try)

- You can rename columns directly (new_name = old_name) 

- Take a look at the `mtcars` dataset using `glimpse()`

- Use the `select()` function to select any 3 variables

- Use the `select()` function to select the last 3 variables

- Use the `select()` function to rename `mpg` to `hello_world`

]

.footnote[`?select()` if you need help]

???

`select(mtcars, mpg, disp, drat)`

`select(mtcars, am:carb)`

`select(mtcars, hello_world = mpg)`

---
layout: true
class: middle

# **filter** 

# .blue[&lt;u&gt;rows&lt;/u&gt;] .grey[of a dataframe] 

# .grey[with]

# .big[filter()]

---

---
background-image: url(./assets/img/filter1.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/filter2.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/filter3.png)
background-size: 600px
background-position: 90% 40%

---
layout: false

# filter()

- You can use logical operators in filter

| Operator   | function                 |
| :--------: | :----------------------- |
| **&lt;**      | less than                |
| **&gt;**      | greater than             |
| **&lt;=**     | less than or equal to    |
| **&gt;=**     | greater than or equal to |
| **==**     | equal to                 |
| **!=**     | not equal to             |
| **&amp;#124;** | or                       |
| **&amp;**      | and                      |
| **%in%**   | in                       |

- Filter rows in which `mpg` is less than 20 and greater than 14
- Filter rows in which `cyl` is equal to 6
- Filter rows in which `mpg` is greater than 20 or `disp` is less than 
200

???

`filter(mtcars, mpg &lt; 20 &amp; mpg &gt; 14)`

`filter(mtcars, cyl == 6)`

`filter(mtcars, mpg &gt; 20 | disp &lt; 200)`

---
layout: true
class: middle

# **arrange** 

# .blue[&lt;u&gt;rows&lt;/u&gt;] .grey[of a dataframe] 

# .grey[with]

# .big[arrange()]

---

---
background-image: url(./assets/img/arrange1.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/arrange2.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/arrange3.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/arrange4.png)
background-size: 600px
background-position: 90% 50%

---
layout: false

# arrange()

.big[

- You probably won't use this very often

- You can arrange using multiple variables

- Arrange the `mtcars` dataset based on `cyl` and `disp`

- Arrange the `mtcars` dataset based on `mpg` from highest to lowest

]

???

`arrange(mtcars, cyl, disp)`

`arrange(mtcars, desc(mpg))`

---
layout: true
class: middle

# **mutate** 

# .blue[&lt;u&gt;variables&lt;/u&gt;] .grey[of a dataframe] 

# .grey[with]

# .big[mutate()]

---

---
background-image: url(./assets/img/mutate1.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/mutate2.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/mutate3.png)
background-size: 600px
background-position: 90% 50%

---
layout: false
background-image: url(./assets/img/mutate4.png)
background-size: contain

---
background-image: url(./assets/img/mutate5.png)
background-size: contain

---

# mutate()

- Get comfortable using `mutate()`

- In the `mtcars` dataset, `select` the `mpg` column and then...
  - create a new column called `mpg_x2` that doubles every value in the dataframe
--

  - create a new column called `mpg_c` that centers the mpg data by subtracting the mean value of `mpg` from every value in the dataframe
--

  - **CHALLENGE**: create a new column called `value` that applies the label 'good' to cars that get over 18 mpg and the label 'bad' to cars that get 18 mpg or less

--

**HINT**:  
Start every attempt in the same way... 

.pull-left[


``` r
mtcars |&gt; 
  select(mpg) |&gt; 
* mutate(???)
```

]

???

```
mtcars |&gt; 
  select(mpg) |&gt; 
  mutate(mpg_x2 = mpg * 2)
```

```
mtcars |&gt; 
  select(mpg) |&gt; 
  mutate(mpg_c = mpg - mean(mpg))
```

```
mtcars |&gt; 
  select(mpg) |&gt; 
  mutate(value = if_else(mpg &lt;= 18, 'bad', 'good'))
```

---
background-image: url(https://raw.githubusercontent.com/jvcasillas/media/master/rstats/memes/rstats_case_when.png)
background-size: 600px
background-position: 100% 50%

# Advanced mutations

### mutate() + case_when()

.pull-left[

- Extremely useful when you need to create a new column based on multiple 
conditions of another column

- Use this if you find yourself using nested `if_else()`

- Syntax uses logical operators:  
`condition ~ desired result`

]

---

.pull-left[

### Conditions

- if **age of learning** is .blue[less than] 12 and **L1** is .blue[Spanish], then .green[heritage speaker]
- if **age of learning** is .blue[less than] 12 and **L1** is .blue[English], then .green[early learner]
- if **age of learning** is .blue[greater than] 12, then .green[late learner]
- if **age of learning** is `NA`, then .green[monolingual]


|  id| age_learn_l2|l1 |
|---:|------------:|:--|
| 101|            3|sp |
| 102|            2|sp |
| 103|            3|sp |
| 104|           NA|sp |
| 105|           18|en |
| 106|           17|en |
| 107|            3|en |
| 108|            2|en |
| 109|           NA|en |
| 110|            3|sp |

]

--

.pull-right[

### Code


``` r
case_when_df |&gt; 
mutate(
* group = case_when(
    age_learn_l2 &lt; 12 &amp; l1 == 'sp' ~ 'heritage', 
    age_learn_l2 &lt; 12 &amp; l1 == 'en' ~ 'early_learner', 
    age_learn_l2 &gt; 12 ~ 'late_learner', 
    is.na(age_learn_l2) ~ 'monolingual'
  )
) |&gt; 
knitr::kable()
```



|  id| age_learn_l2|l1 |group         |
|---:|------------:|:--|:-------------|
| 101|            3|sp |heritage      |
| 102|            2|sp |heritage      |
| 103|            3|sp |heritage      |
| 104|           NA|sp |monolingual   |
| 105|           18|en |late_learner  |
| 106|           17|en |late_learner  |
| 107|            3|en |early_learner |
| 108|            2|en |early_learner |
| 109|           NA|en |monolingual   |
| 110|            3|sp |heritage      |

]

---
layout: true
class: middle

.pull-left[

# **summarize** 

# .blue[&lt;u&gt;variables&lt;/u&gt;] .grey[of a dataframe] 

# .grey[with]

# .big[summarize()]

]

---

---
background-image: url(./assets/img/summarize1.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/summarize2.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/summarize3.png)
background-size: 600px
background-position: 90% 50%

--

.pull-right[
.footnote[
- `summarize()` will always reduce the number of rows in your dataframe
- `summarize()` is often accompanied by the helper function `group_by()`
]
]

---
background-image: url(./assets/img/summarize4.png)
background-size: 600px
background-position: 90% 50%

---
background-image: url(./assets/img/summarize5.png)
background-size: 600px
background-position: 90% 50%

---
layout: false

# summarize() &lt;br&gt; group_by |&gt; summarize()

### Note

- Get accustomed to using these two functions, they are extremely useful
- Remember that `summarize()` reduces the number of rows in your dataframe
- Remember that `mutate()` adds a column to your dataframe
- You can include more than one summary statistic inside `summarize()`

--

### Practice

- Calculate the mean value of `mpg` in the dataset `mtcars`
- Calculate the mean value of `mpg` as a function of `cyl`
- Calculate the mean, standard deviation, min, and max of `mpg` as 
a function of `cyl`

???

```
mtcars |&gt; 
  group_by(cyl) |&gt; 
  summarize(
    mean_mpg = mean(mpg), 
    sd_mpg = sd(mpg), 
    min_mpg = min(mpg), 
    max_mpg = max(mpg)
  )
```

---
background-color: black
background-image: url(https://raw.githubusercontent.com/jvcasillas/media/master/rstats/memes/r_tidy_verbs.png)
background-size: contain
background-position: 100% 50%

# Summary











---
class: title-slide-section-grey, center, middle
background-image: url(https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/tidyr.png)
background-size: contain

---
background-image: url(https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/tidyr.png)
background-size: 200px
background-position: 95% 5%

# tidyr

### What is `tidyr`?

- A package that is part of the `tidyverse`

- Contains functions (verbs) that are helpful for tidying (cleaning, 
munging) data

### What is tidy data?

- Each variable must have its own column.

- Each observation must have its own row.

- Each value must have its own cell.

- (most) functions in R are designed to work with tidy data

- It is imperative that you learn how to tidy your data

---
layout: true

# What does untidy data look like?

- https://www.jvcasillas.com/untidydata/

---

&lt;iframe src="https://www.jvcasillas.com/untidydata" style="border:none;" height="400" width="100%"&gt;&lt;/iframe&gt;

---


.pull-left[

|id     |spec  | test1| test2|
|:------|:-----|-----:|-----:|
|span01 |g1_lo | 64.31|  69.2|
|span02 |g1_lo | 59.81|  63.7|
|span03 |g1_hi | 66.08|  70.9|
|span04 |g1_hi | 72.78|  79.2|
|span05 |g2_lo | 68.29|  75.4|
|span06 |g2_lo | 69.22|  76.7|
|span07 |g2_hi | 71.36|  77.2|
|span08 |g2_hi | 80.37|  88.9|
|cata01 |g1_lo | 75.63|  83.6|
|cata02 |g1_lo | 71.25|  78.8|
|cata03 |g1_hi | 69.09|  74.6|
|cata04 |g1_hi | 72.35|  80.7|
|cata05 |g2_lo | 71.66|  77.9|
|cata06 |g2_lo | 69.01|  75.0|
|cata07 |g2_hi | 69.86|  76.0|
]

.pull-right[

### `pre_post`

- How many columns are there?

- How many variables are there? What are they?

- How many observations are there per row?

]

---
layout: false
class: middle, center

# **separate** 

# .blue[&lt;u&gt;elements&lt;/u&gt;] .grey[of a variable] 

# .grey[with]

# .big[separate()]

---

# separate()

.pull-left[

- This is untidy data

- How many variables does the column `id` contain?


|id        | pre_test|
|:---------|--------:|
|101_m_ctr |       75|
|102_m_ctr |       70|
|103_m_ctr |       65|
|104_m_exp |       66|
|105_m_exp |       68|
|106_m_exp |       58|
|107_f_ctr |       60|
|108_f_ctr |       66|
|109_f_ctr |       69|
|110_f_exp |       54|
|111_f_exp |       88|
|112_f_exp |       44|

]

--

.pull-right[




``` r
my_data_wide |&gt; 
  separate(
    col = id, 
    into = c('id', 'group', 'condition'), 
    sep = "_"
  ) 
```


|id  |group |condition | pre_test|
|:---|:-----|:---------|--------:|
|101 |m     |ctr       |       75|
|102 |m     |ctr       |       70|
|103 |m     |ctr       |       65|
|104 |m     |exp       |       66|
|105 |m     |exp       |       68|
|106 |m     |exp       |       58|
|107 |f     |ctr       |       60|
|108 |f     |ctr       |       66|
|109 |f     |ctr       |       69|
|110 |f     |exp       |       54|
|111 |f     |exp       |       88|
|112 |f     |exp       |       44|
]

---
class: middle, center

# **unite** 

# .blue[&lt;u&gt;columns&lt;/u&gt;] .grey[into a variable] 

# .grey[with]

# .big[unite()]

---

# unite()

.pull-left[

- We will put `id`, `group`, and `condition` back into a single column

- You probably won't use this often


|id  |group |condition | pre_test|
|:---|:-----|:---------|--------:|
|101 |m     |ctr       |       75|
|102 |m     |ctr       |       70|
|103 |m     |ctr       |       65|
|104 |m     |exp       |       66|
|105 |m     |exp       |       68|
|106 |m     |exp       |       58|
|107 |f     |ctr       |       60|
|108 |f     |ctr       |       66|
|109 |f     |ctr       |       69|
|110 |f     |exp       |       54|
|111 |f     |exp       |       88|
|112 |f     |exp       |       44|

]

--

.pull-right[




``` r
my_data_wide |&gt; 
  unite(
    col = id_group_condition, 
    c('id', 'group', 'condition'), 
    sep = "-"
  )
```


|id_group_condition | pre_test|
|:------------------|--------:|
|101-m-ctr          |       75|
|102-m-ctr          |       70|
|103-m-ctr          |       65|
|104-m-exp          |       66|
|105-m-exp          |       68|
|106-m-exp          |       58|
|107-f-ctr          |       60|
|108-f-ctr          |       66|
|109-f-ctr          |       69|
|110-f-exp          |       54|
|111-f-exp          |       88|
|112-f-exp          |       44|

]

---
class: title-slide-section-grey, center, middle

# What if we have more than one observation per row?

---
class: middle, center

# **pivot_longer()**

# .blue[&lt;u&gt;dataframes&lt;/u&gt;] .grey[from] wide .grey[to] long

# .grey[with]

# .big[pivot_longer()]

---

.pull-left[
&lt;table class="table" style="color: black; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; id &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; pre_test &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; post_test &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 101_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;75&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;85&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 102_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;70&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;80&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 103_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;65&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;75&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 104_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;66&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;76&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 105_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;68&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;78&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 106_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;58&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;68&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 107_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;60&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;70&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 108_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;66&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;76&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 109_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;69&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;79&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 110_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;54&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;64&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 111_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;88&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;98&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 112_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;44&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;54&lt;/span&gt; &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- What do the columns `pre_test` and `post_test` represent?

- What is each numeric value?

]

--

.pull-right[
&lt;table class="table" style="color: black; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; id &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; test &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; score &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 101_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 101_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 85 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 102_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 102_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 103_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 103_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 104_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 104_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 105_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 68 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 105_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 78 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 106_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 58 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 106_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 68 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 107_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 107_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 108_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 108_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 109_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 69 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 109_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 79 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 110_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 110_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 111_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 111_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 98 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 112_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 112_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
class: middle


``` r
my_data_wide |&gt; 
  pivot_longer(
    cols = c("pre_test", "post_test"), 
    names_to = "test", 
    values_to = "score"
  )
```

&lt;table class="table" style="color: black; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; id &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; test &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; score &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 101_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 101_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 85 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 102_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 102_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 103_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 103_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 104_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 104_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 105_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 68 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 105_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 78 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 106_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 58 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 106_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 68 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 107_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 107_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 108_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 108_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 109_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 69 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 109_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 79 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 110_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 110_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 111_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 111_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 98 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 112_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 112_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
background-image: url(./assets/img/gather.gif)
background-size: contain

.footnote[https://alison.rbind.io]

---

# pivot_longer()

### Note

- You will have to do this often
- Remember... 
    - `cols` is a vector of names of the columns you want to pivot
    - `names_to` is the name you will give the column of the factor
    - `values_to` is the name you will give the column of observations (numbers)

### Practice

- Download the `untidydata` package:  
`remotes::install_github('jvcasillas/untidydata')`
- Load the package and convert the `pre_post` data set from wide to long
  - Include the relevant variables or
  - Exclude the irrelevant variable

.footnote[&lt;sup&gt;1&lt;/sup&gt; This function used to be called `gather()`]

???

```
pre_post |&gt; 
  pivot_longer(cols = test1:test2, names_to = "test", values_to = "score")
```

```
pre_post |&gt; 
  pivot_longer(cols = -c("id", "spec"), names_to = "test", values_to = "score")
```

---
class: title-slide-section-grey, center, middle

# What if we want a wide data set?

---
class: middle, center

# **pivot_wider**

# .blue[&lt;u&gt;dataframes&lt;/u&gt;] .grey[from] long .grey[to] wide

# .grey[with]

# .big[pivot_wider()]

---

.pull-left[
&lt;table class="table" style="color: black; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; id &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; test &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; score &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 101_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 101_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 85 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 102_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 102_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 103_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 103_m_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 104_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 104_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 105_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 68 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 105_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 78 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 106_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 58 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 106_m_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 68 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 107_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 107_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 108_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 108_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 109_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 69 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 109_f_ctr &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 79 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 110_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 110_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 111_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 111_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 98 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 112_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: red !important;"&gt;pre_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 112_f_exp &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; &lt;span style="     color: blue !important;"&gt;post_test&lt;/span&gt; &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
- We need to `spread()` this dataframe back to wide format (`pivot_wider`)

- Why might we want to do this?

]

---




``` r
my_data_long |&gt; 
* pivot_wider(names_from = "test", values_from = "score") |&gt;
  ggplot() + 
  aes(x = pre_test, post_test) + 
  geom_vline(xintercept = mean(my_data_wide$pre_test), lty = 3) + 
  geom_hline(yintercept = mean(my_data_wide$post_test), lty = 3) + 
  geom_point(size = 4) + 
  theme_test(base_size = 18, base_family = "Palatino")
```

&lt;img src="index_files/figure-html/spread-ex2-1.png" width="936" style="display: block; margin: auto;" /&gt;

---

# pivot_wider()


### Note

- You will probably use `pivot_wider()` less

- It can be useful for making scatterplots and doing data transformations using `mutate()`

### Exercise

- Take a look at the `language_diversity` data set in `untidydata`

- Spread the data set from long to wide using `pivot_wider` and create a plot

.footnote[&lt;sup&gt;1&lt;/sup&gt; This function used to be called `spread()`]

???

```
language_diversity |&gt; 
  pivot_wider(names_from = "Measurement", values_from = "Value") |&gt; 
  ggplot() + 
  aes(x = log(Area), y = log(Langs), label = Country) + 
  geom_text() + 
  geom_smooth(method = "glm", method.args=list(family = "poisson"))
```

---

background-image: url(./assets/img/spread_gather.gif)
background-size: contain

---

&lt;!--
background-color: black
background-image: url(https://raw.githubusercontent.com/jvcasillas/media/master/rstats/memes/rstats_load_all1.png)
background-size: contain

background-color: black
background-image: url(https://raw.githubusercontent.com/jvcasillas/media/master/rstats/memes/rstats_load_all2.png)
background-size: contain
--&gt;

# Loading and saving data

.pull-left[
### read_csv()

- Read .csv files into R using the `read_csv()` function
- Ideally your data is stored in a folder of your project called `data`
- If it is raw data you can use sub-directories, i.e., `data &gt; raw`
- You can pipe directly into any other verbs to tidy your data
- Ex.  

``` r
my_df &lt;- read_csv("./data/raw/raw_data.csv")
```
]

.pull-right[
### write_csv()

- Save dataframes as .csv files using `write_csv()` function
- After tidying your data you can (should) save it 
- Keep this data separate from your raw data, i.e., `data &gt; tidy`
- You can pipe into `write_csv()` right after tidying your data
- Ex.  

``` r
my_df &lt;- read_csv("./data/raw/raw_data.csv") |&gt; 
mutate(
  new_var = var1 - var2, 
  group_sum = if_else(group == "level", -1, 1)
) |&gt; 
write_csv(path = "./data/tidy/tidy_data.csv")
```
]

---
class: title-slide-section-grey, center, middle

# A note about paths

---

# System paths

- what are they?
- how do they work?
- relative paths
- absolute paths
- what problems do they create?
- what are the solutions?

---

# System paths

### What are they?

- Your computer is a hierarchical system of directories (folders) 
and files
- You can think of it as a garden of forking paths
- The top of this hierarchy is the **root**
- The *path* from **root** to a given file is an .blue[absolute path]

![](https://www.researchgate.net/profile/Peter_Makovini/publication/309411137/figure/fig4/AS:667818014044161@1536231630016/Kanes-illustration-of-a-garden-of-forking-paths-2005.jpg)

---
background-image: url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSbaVWfe2qSnmcNes6NZADG-QI6o-3JaTjsc6-hC7Hv08turZmSgg)
background-size: 400px
background-position: 95% 10%

# System paths

### How do they work?

.pull-left[
- The user defines the system specific path
- Every time one "enters" a directory the path is marked with "**`/`**"&lt;sup&gt;1&lt;/sup&gt;
- Ex.  
`/Users/casillas/Desktop/new_proj`
- This **absolute path** goes from my system root to a directory on 
my desktop called `new_proj`

.footnote[&lt;sup&gt;1&lt;/sup&gt;This is specific to the operating system. For PCs you use "**`\`**".]
]

--

&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;
.pull-right[
- We can simplify the hierarchy by using .blue[relative paths]
- With a .blue[relative path] the user specifies what root is and all 
paths are *relative* to that root
]

---

## `new_proj` as root

.big[
&amp;nbsp; **.**  
├── README.md  
├── data  
│ &amp;nbsp; &amp;nbsp; &amp;nbsp; ├── raw  
│ &amp;nbsp; &amp;nbsp; &amp;nbsp; │ &amp;nbsp; &amp;nbsp; &amp;nbsp; ├── EMD_2afc_template_2019-02-14_09h56.54.363.csv  
│ &amp;nbsp; &amp;nbsp; &amp;nbsp; │ &amp;nbsp; &amp;nbsp; &amp;nbsp; └── ...  
│ &amp;nbsp; &amp;nbsp; &amp;nbsp; └── tidy  
│ &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; └── tidy_data.csv  
├── my_proj.Rproj  
└── scripts  
&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; └── my_script.R

]

---

# System paths

### What problems do they create?

- An **absolute path** can get long (and annoying) fast
- Your file system will have different paths than my file system

--

### What are the solutions? 

- Always use relative paths! 
  - **`./`** = "here"
  - **`../`** = "Go up one directory"
  - **`../../`** = "Go up two directories"
- Always use RStudio projects 👍
- Use Rstudio projects + `here()` 😍

---

# System paths

### Exercise I

- Download this repo: https://github.com/jvcasillas/new_proj
- Load the data using an absolute path
- Reload the data using a relative path
- Calculate a summary on the data (`group_by() + summarize()`) 
and save the output as a csv to the data folder
- Load the new .csv
- Move the .csv files to root and reload them

--

### Exercise II

- Install `here`
- Load `here`
- Run `here()`. What happens?
- Load the data as you did before but use `here()` where previously 
you used a relative path

---
class: title-slide-final, middle
background-image: url(https://github.com/jvcasillas/ru_xaringan/raw/master/img/logo/ru_shield.png), url(https://www.r-project.org/Rlogo.png)
background-size: 55px, 100px
background-position: 9% 15%, 89% 15%

# Getting help

## If you have problems getting or tidying your data
## ask for help in the slack channel

### You can find some very basic tutorials related to 
### R, RStudio, RMarkdown, GitHub, and Slack [here][here]

[here]: http://www.jvcasillas.com/ru_teaching/ru_spanish_589/589_01_s2018/sources/tuts/index.html
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://www.jvcasillas.com/ru_xaringan/js/ru_xaringan.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
